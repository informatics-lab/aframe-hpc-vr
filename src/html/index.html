<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">

    <meta http-equiv="x-ua-compatible" content="ie=edge">

    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">

    <title>Met Office || High Performance Computer VR Tour</title>
    <meta name="description" content="A virtual reality tour of the Met Office high performance computing facilities">


    <link rel="apple-touch-icon" sizes="57x57" href="assets/favicon/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="assets/favicon/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="assets/favicon/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="assets/favicon/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="assets/favicon/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="assets/favicon/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="assets/favicon/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="assets/favicon/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="assets/favicon/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="assets/favicon/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="assets/favicon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/favicon/favicon-16x16.png">
    <link rel="manifest" href="assets/favicon/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="assets/favicon/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">


</head>
<body>

<div id="header">
    <img class="logo" src="assets/images/met-office-logo.svg" alt="Met Office"/>
    <h1 class="title">High Performance Computer VR Tour</h1>
</div>

<a-scene menu-controller
         sound__hover="src:#hover; on:toggleMenuHover; volume:1;"
         sound__click="src:#click; on:toggleMenuClick; volume:1;">

    <!--
    All our scene assets
    -->
    <a-assets>
        <img id="grid-floor" src="assets/textures/grid-floor.png"/>
        <img id="dog" src="assets/images/dog.jpg"/>
        <img id="cat" src="assets/images/cat.jpg"/>

        <video id="greeting-background" webkit-playsinline playsinline autoplay loop muted
               src="assets/videos/greeting-background.mp4"/>
        <video id="sample-video" webkit-playsinline playsinline autoplay loop muted
               src="assets/videos/SampleVideo_1280x720_1mb.mp4"/>

        <audio id="hover" src="assets/sounds/menu-item-hover.wav"/>
        <audio id="menu" src="assets/sounds/menu-open-close.wav"/>
        <audio id="click" src="assets/sounds/menu-item-click.wav"/>

    </a-assets>

    <!--
    Mouse Controls
    controls for non-VR mode
    -->
    <a-entity id="mouse-controls"
              raycaster="objects: .clickable;"
              cursor="rayOrigin:mouse; fuse:false;"
              event-emit__shaddow-enter-vr="triggerEvents:enter-vr; emitEvent:entervr; globalListener:true;"
              event-emit__shaddow-exit-vr="triggerEvents:exit-vr; emitEvent:exitvr; globalListener:true;"
              enable-disable="disableEvents:entervr; enableEvents:exitvr; toggleProps:raycaster,cursor"
    ></a-entity>

    <!--
    Grid floor for greeting scene
    must be above camera to avoid transparency issues.
    -->
    <a-plane id="floor"
             src="#grid-floor"
             repeat="4 4"
             position="0 0 0"
             rotation="-90 0 0"
             width="100"
             height="100"
             color="#FFFFFF"
             material="transparent:true;"
             event-emit__floor-shaddow-menuchoice="triggerEvents:menuchoice; emitEvent:menuChoice; globalListener:true;"
             animate__floor-fadeout="component: color; duration:300; easing:linear; type:color; triggerEvents:menuChoice; from:#FFFFFF; to:#000000;"
             event-set__floor-hide="_event:floor-fadeoutEnd; visible:false;"
    ></a-plane>


    <!--
    Camera for the scene
    entity defined here so that hud elements can be nested within it thus attaching them to its immediate view.
    -->
    <a-camera id="camera" active="true" reverse-mouse-drag="true">
        <!--
        Gaze Controls
        -->
        <a-entity id="gaze-controls"
                  visible="false"
                  raycaster="objects: .clickable;"
                  cursor="fuse:true; fuseTimeout:1000;"
                  position="0 0 -1"
                  scale="0.04 0.04 0.04"
                  event-emit__shaddow-enter-vr="triggerEvents:enter-vr; emitEvent:entervr; globalListener:true;"
                  event-emit__shaddow-exit-vr="triggerEvents:exit-vr; emitEvent:exitvr; globalListener:true;"
                  event-set__hide="_event: exitvr; visible: false;"
                  event-set__show="_event: entervr; visible: true;"
                  enable-disable="disableEvents:exitvr; enableEvents:entervr; toggleProps:cursor,raycaster; enabled:false"
        >
            <a-ring color="#2A2A2A" theta-length="360" theta-start="90">
            </a-ring>
            <a-ring theta-length="0" theta-start="90"
                    material="shader:standard; emissive:#39C; emissiveIntensity:3; color:blue;"
                    event-emit__shaddow-gazefusing="triggerEvents:gazefusing; emitEvent:gazeFusing; globalListener:true;"
                    event-emit__shaddow-gazeend="triggerEvents:gazeend; emitEvent:gazeEnd; globalListener:true;"
                    animate__gazefusing="component: theta-length; duration:1000; triggerEvents:gazeFusing; interruptEvents:gazeEnd; type:number; from:0; to:360; easing:linear;"
                    event-set__gazeend="_event:gazeEnd; theta-length:0;"
            ></a-ring>
        </a-entity>


        <!--
        Greeting text
        -->
        <a-entity material="shader: chromakey; src: #greeting-background; color: 0.0 0.0 0.0;"
                  geometry="primitive: plane; width:0.08; height:0.04;"
                  position="-0.05 -0.05 -0.1"
        ></a-entity>

        <!--
        Used to figure out the position the menu should go to/from
        -->
        <a-plane id="menu-placeholder" visible="false" width="1" height="1" position="0 0 -1.1"></a-plane>

    </a-camera>


    <!--
    Menu
    -->

    <a-plane menu id="menu" visible="true" width="1" height="0.5625" position="0 0 0" rotation="-90 0 0"
             animate__showMenu-position="component: position; duration:2000; triggerEvents:showMenu; interruptEvents:hideMenu; from:0 0 0;"
             animate__hideMenu-position="component: position; duration:300; easing:linear; triggerEvents:hideMenu; interruptEvents:showMenu; to:0 0 0;"
             event-set__show="_event:showMenu-position-begin; visible:true;"
             event-set__hide="_event:hideMenu-position-complete; visible:false;"
             sound__hide="src:#menu; on:hideMenu; volume:1;"
             sound__show="src:#menu; on:showMenu; volume:1;"
    >
        <!--
        menu content here
        each entity tag is one row of links
        -->
        <a-entity layout="type: line; margin: 0.6" position="-0.3 0 0.01">

            <a-plane width="0.2"
                     height="0.2"
                     class="clickable"
                     sound__hover="src:#hover; on:mouseenter; volume:1;"
                     sound__click="src:#click; on:click; volume:1;"
                     event-set__mouseenter="_event:mouseenter; scale: 1.2 1.2 1;"
                     event-set__mouseleave="_event:mouseleave; scale: 1 1 1;"
                     event-emit__gazefusing="triggerEvents:fusing; emitEvent:gazefusing; globalListener:false; globalEmitter:true;"
                     event-emit__gazeend="triggerEvents:click,mouseleave; emitEvent:gazeend; globalListener:false; globalEmitter:true;"
                     event-emit__click="triggerEvents:click; emitEvent:menuchoice; keys:src; values:#sample-video; globalListener:false; globalEmitter:true;"
                     material="shader:flat; src:#dog;"
            ></a-plane>

            <a-plane width="0.2"
                     height="0.2"
                     class="clickable"
                     sound__hover="src:#hover; on:mouseenter; volume:1;"
                     sound__click="src:#click; on:click; volume:1;"
                     event-set__mouseenter="_event:mouseenter; scale: 1.2 1.2 1;"
                     event-set__mouseleave="_event:mouseleave; scale: 1 1 1;"
                     event-emit__gazefusing="triggerEvents:fusing; emitEvent:gazefusing; globalListener:false; globalEmitter:true;"
                     event-emit__gazeend="triggerEvents:click,mouseleave; emitEvent:gazeend; globalListener:false; globalEmitter:true;"
                     event-emit__click="triggerEvents:click; emitEvent:menuchoice; keys:src; values:#greeting-background; globalListener:false; globalEmitter:true;"
                     material="shader:flat; src:#cat;"
            ></a-plane>

        </a-entity>
    </a-plane>

    <!--
    Photosphere background
    -->
    <a-videosphere id="bg" src="#greeting-background" color="#FFFFFF" material="shader:flat;"
                   switch-background="triggerEvents:menuchoice;"
                   animate__bg-fadeout="component: color; duration:300; easing:linear; type:color; triggerEvents:bg-fadeout; from:#FFFFFF; to:#000000;"
                   animate__bg-fadein="component: color; duration:300; easing:linear; type:color; triggerEvents:bg-fadein; from:#000000; to:#FFFFFF;"
    ></a-videosphere>

</a-scene>
</body>
</html>